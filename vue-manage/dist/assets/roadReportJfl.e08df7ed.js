import{f as e,b as a,r as t,o as l,h as n,i,k as r,l as o,I as d,m as p,t as u,c as s,p as c}from"./vendor.ac52fd94.js";import{_ as m,ch as g,ci as h,cj as w}from"./index.1d57ac4a.js";const b={name:"roadReportJfl",components:{},data:()=>({tableH:0}),setup(){const t=e({name:"",startTime:"",endTime:"",pageNum:1,pageSize:20}),l=a([]),n=a(0);let i=e({time:""});const r=()=>{g(t).then((e=>{l.value=e.data.list,n.value=e.data.total}))};r();const o=e=>`${e.getFullYear()}-${e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1)}-${e.getDate()>=10?e.getDate():"0"+e.getDate()}`,d=a(!1),p=a("订单列表"),u=a([]),s=e({pageNum:1,pageSize:10,startTime:"",endTime:"",roadId:"",pageType:"",parking_type:"0"}),c=a(0);return{handleSearch:()=>{t.pageNum=1,r()},handlePageChange:e=>{t.pageNum=e,r()},getQueryDate:()=>{null==i.time||[]==i.time||""==i.time?(t.startTime="",t.endTime=""):(t.startTime=o(i.time[0]),t.endTime=o(i.time[1]))},query:t,form:i,tableData:l,pageTotal:n,exportExcel:()=>{h(t).then((e=>{const a=window.URL.createObjectURL(new Blob([e])),t=document.createElement("a");t.href=a,t.setAttribute("download","路内缴费率统计.xls"),document.body.appendChild(t),t.click()}))},viewVisible:d,dialogT:p,orderData:u,orderQuery:s,pageTotal2:c,handleView:(e,a,l)=>{p.value=a.title+"订单列表",s.pageNum=1,s.startTime=t.startTime,s.endTime=t.endTime,s.roadId=a.id,s.pageType=l,w(s).then((e=>{u.value=e.data.list,c.value=e.data.total})),d.value=!0},handlePageChange2:e=>{s.pageNum=e,s.startTime=t.startTime,s.endTime=t.endTime,w(s).then((e=>{u.value=e.data.list,c.value=e.data.total}))}}},methods:{handleSelectionChange(e){this.selectedData=e}},created(){let e=document.documentElement.clientHeight||document.body.clientHeight;this.tableH=e-308+"px"}},f={class:"container"},_={class:"handle-box"},y={class:"left-panel"},C=i("span",{class:"dispinline ml5 font14 color666"},"停入时间：",-1),x=i("span",{class:"dispinline ml5"},null,-1),k=i("span",{class:"dispinline ml5"},null,-1),v=i("div",{class:"clear"},null,-1),T={class:"pagination"},z={class:"pagination"},j={class:"dialog-footer"};var V=m(b,[["render",function(e,a,m,g,h,w){const b=t("el-input"),V=t("el-date-picker"),N=t("el-button"),S=t("el-form"),D=t("el-table-column"),A=t("el-link"),$=t("el-table"),q=t("el-pagination"),H=t("el-tag"),Q=t("el-dialog");return l(),n("div",null,[i("div",f,[i("div",_,[i("div",y,[r(S,{inline:"",size:"small"},{default:o((()=>[r(b,{size:"small",class:"handle-input mr10",placeholder:"路内名称",clearable:"",modelValue:g.query.name,"onUpdate:modelValue":a[0]||(a[0]=e=>g.query.name=e),onKeyup:a[1]||(a[1]=d((e=>g.handleSearch()),["enter"]))},null,8,["modelValue"]),C,r(V,{size:"small",class:"datepicker",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",modelValue:g.form.time,"onUpdate:modelValue":a[2]||(a[2]=e=>g.form.time=e),onChange:g.getQueryDate},null,8,["modelValue","onChange"]),x,r(N,{size:"small",type:"primary",icon:"el-icon-search",onClick:g.handleSearch},{default:o((()=>[p(" 查询 ")])),_:1},8,["onClick"]),k,r(N,{size:"small",type:"success",icon:"el-icon-upload2",onClick:g.exportExcel},{default:o((()=>[p(" 导出 ")])),_:1},8,["onClick"])])),_:1})]),v]),r($,{data:g.tableData,ref:"multipleTable",onSelectionChange:w.handleSelectionChange,border:"",class:"table","max-height":h.tableH,"header-cell-class-name":"table-header"},{default:o((()=>[r(D,{type:"index",label:"序号",width:"55",align:"center"}),r(D,{label:"路内名称",align:"center",prop:"title"}),r(D,{label:"泊位数",align:"center",width:"200",prop:"stopcarnum"}),r(D,{label:"临停车辆",align:"center"},{default:o((()=>[r(D,{prop:"counts",label:"订单数",width:"100",align:"center"},{default:o((e=>[r(A,{type:"primary",href:"javascript:;",onClick:a=>g.handleView(e.$index,e.row)},{default:o((()=>[p(u(e.row.counts),1)])),_:2},1032,["onClick"])])),_:1}),r(D,{prop:"counts2",label:"非零订单数",width:"100",align:"center"},{default:o((e=>[r(A,{type:"primary",href:"javascript:;",onClick:a=>g.handleView(e.$index,e.row,0)},{default:o((()=>[p(u(e.row.counts2),1)])),_:2},1032,["onClick"])])),_:1}),r(D,{prop:"sumAmount",label:"应收金额",width:"100",align:"center"},{default:o((e=>[r(A,{type:"primary",href:"javascript:;",onClick:a=>g.handleView(e.$index,e.row,1)},{default:o((()=>[p(u(e.row.sumAmount),1)])),_:2},1032,["onClick"])])),_:1}),r(D,{prop:"paidAmount",label:"实收金额",width:"100",align:"center"},{default:o((e=>[r(A,{type:"primary",href:"javascript:;",onClick:a=>g.handleView(e.$index,e.row,2)},{default:o((()=>[p(u(e.row.paidAmount),1)])),_:2},1032,["onClick"])])),_:1}),r(D,{prop:"unpaidAmount",label:"在停金额",width:"100",align:"center"},{default:o((e=>[r(A,{type:"primary",href:"javascript:;",onClick:a=>g.handleView(e.$index,e.row,3)},{default:o((()=>[p(u(e.row.unpaidAmount),1)])),_:2},1032,["onClick"])])),_:1}),r(D,{prop:"unpaidAmount2",label:"待缴费金额",width:"100",align:"center"},{default:o((e=>[r(A,{type:"primary",href:"javascript:;",onClick:a=>g.handleView(e.$index,e.row,4)},{default:o((()=>[p(u(e.row.unpaidAmount2),1)])),_:2},1032,["onClick"])])),_:1})])),_:1}),r(D,{label:"补缴",align:"center"},{default:o((()=>[r(D,{prop:"bjcs",label:"补缴次数",width:"100",align:"center"},{default:o((e=>[i("p",null,u(e.row.bjcs),1)])),_:1}),r(D,{prop:"bjje",label:"补缴金额",width:"100",align:"center"},{default:o((e=>[i("p",null,u(e.row.bjje),1)])),_:1})])),_:1}),r(D,{label:"收费率",align:"center"},{default:o((()=>[r(D,{prop:"jfs",label:"缴费数",width:"100",align:"center"},{default:o((e=>[i("p",null,u(e.row.jfs),1)])),_:1}),r(D,{prop:"jfl",label:"缴费率",width:"100",align:"center"},{default:o((e=>[i("p",null,u(e.row.jfl),1)])),_:1}),r(D,{prop:"zzl",label:"周转率",width:"100",align:"center"},{default:o((e=>[i("p",null,u(e.row.zzl),1)])),_:1})])),_:1})])),_:1},8,["data","onSelectionChange","max-height"]),i("div",T,[r(q,{background:"",layout:"total, prev, pager, next","current-page":g.query.pageNum,"page-size":g.query.pageSize,total:g.pageTotal,onCurrentChange:g.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),r(Q,{title:g.dialogT,modelValue:g.viewVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>g.viewVisible=e),width:"1200px"},{footer:o((()=>[i("span",j,[r(N,{onClick:a[3]||(a[3]=e=>g.viewVisible=!1)},{default:o((()=>[p("取 消")])),_:1})])])),default:o((()=>[r($,{data:g.orderData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:o((()=>[r(D,{prop:"order_no",label:"订单号",align:"center"}),r(D,{prop:"car_no",label:"车牌号",width:"120",align:"center"},{default:o((e=>["1"==e.row.car_type?(l(),s(H,{key:0,size:"small",textContent:u(e.row.car_no)},null,8,["textContent"])):"2"==e.row.car_type?(l(),s(H,{key:1,size:"small",type:"success",textContent:u(e.row.car_no)},null,8,["textContent"])):"3"==e.row.car_type?(l(),s(H,{key:2,size:"small",type:"warning",textContent:u(e.row.car_no)},null,8,["textContent"])):c("",!0)])),_:1}),r(D,{prop:"drivein_time",label:"驶入时间",width:"180",align:"center"}),r(D,{prop:"driveout_time",label:"驶离时间",width:"180",align:"center"}),r(D,{prop:"resTime",label:"停车时长",width:"100",align:"center"}),r(D,{prop:"sum_amount",width:"100",label:"应收金额",align:"center"},{default:o((e=>[i("p",null,u(Number(e.row.sum_amount).toFixed(2)),1)])),_:1}),r(D,{prop:"paid_amount",width:"100",label:"实收金额",align:"center"},{default:o((e=>[i("p",null,u(Number(e.row.paid_amount).toFixed(2)),1)])),_:1}),r(D,{prop:"unpaid_amount",width:"100",label:"在停/待缴费金额",align:"center"},{default:o((e=>[i("p",null,u(Number(e.row.unpaid_amount).toFixed(2)),1)])),_:1}),r(D,{prop:"status_name",label:"状态",width:"100",align:"center"},{default:o((e=>["1"==e.row.status?(l(),s(H,{key:0,size:"small",textContent:u(e.row.state_name)},null,8,["textContent"])):"2"==e.row.status?(l(),s(H,{key:1,size:"small",type:"success",textContent:u(e.row.state_name)},null,8,["textContent"])):"3"==e.row.status?(l(),s(H,{key:2,size:"small",type:"warning",textContent:u(e.row.state_name)},null,8,["textContent"])):"4"==e.row.status?(l(),s(H,{key:3,size:"small",type:"danger",textContent:u(e.row.state_name)},null,8,["textContent"])):c("",!0)])),_:1})])),_:1},8,["data"]),i("div",z,[r(q,{background:"",layout:"total, prev, pager, next","current-page":g.orderQuery.pageNum,"page-size":g.orderQuery.pageSize,total:g.pageTotal2,onCurrentChange:g.handlePageChange2},null,8,["current-page","page-size","total","onCurrentChange"])])])),_:1},8,["title","modelValue"])])}]]);export{V as default};
