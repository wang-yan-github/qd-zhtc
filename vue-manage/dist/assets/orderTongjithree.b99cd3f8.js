import{f as e,b as a,r as l,o as t,h as r,i as o,k as d,l as n,m as s,c as i,F as u,j as m,p as c}from"./vendor.ac52fd94.js";import{i as p}from"./index.9abe9c67.js";import{_ as h,a5 as g,a6 as f,U as b,l as I,ah as y}from"./index.1d57ac4a.js";const _={name:"orderTongji",setup(){const l=localStorage.getItem("menuType"),t=e({areaId:"",streetId:"",roadId:"",parkId:"",startTime:"",endTime:"",pageIndex:1,pageSize:10}),r=a([]);let o=e({time:"",areaId:"",streetId:"",roadId:"",areas:[],streets:[],roads:[]});const d=e({}),n=()=>{g(d).then((e=>{o.areas=e.data}))};n();let s=e({areaId:t.areaId});const i=e({streetId:t.streetId}),u=()=>{y(t).then((e=>{r.value=e.data.data,c.series[0].data=e.data.view;var a=document.getElementById("main2s");p(a).setOption(c)}))};u();const m=e=>`${e.getFullYear()}-${e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1)}-${e.getDate()>=10?e.getDate():"0"+e.getDate()}`,c={title:{text:"订单状态占比分析",show:!0,textStyle:{fontSize:16,fontWeight:"normal",color:"#303133"}},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left",show:!1},grid:{left:"10px",right:"10px",bottom:"3%",containLabel:!0},series:[{name:"订单总数",type:"pie",radius:"50%",data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};return{query:t,tableData:r,form:o,options4:c,menuType:l,getArea:n,getStreet:()=>{s.areaId=t.areaId,t.roadId="",t.streetId="",f(s).then((e=>{o.streets=e.data}))},getQueryDate:()=>{null==o.time||[]==o.time||""==o.time?(t.startTime="",t.endTime=""):(t.startTime=m(o.time[0]),t.endTime=m(o.time[1]))},getRoad:()=>{t.roadId="",i.streetId=t.streetId,b(i).then((e=>{o.roads=e.data}))},getParks:()=>{i.streetId=t.streetId,t.parkId="",I(i).then((e=>{o.roads=e.data}))},handleSearch:()=>{t.pageIndex=1,u()},handlePageChange:e=>{t.pageIndex=e,u()}}},methods:{goTo(){this.$router.push("/orderstatic")},goTo2(){this.$router.push("/orderstatictwo")},init(){var e=document.getElementById("main2s");e.removeAttribute("_echarts_instance_"),p(e).setOption(this.options4)}},mounted(){this.init()}},v={class:"container"},k={class:"top-panel"},V={class:"left-panel"},C={class:"right-panel"},w=o("span",{class:"mar5 color999"},null,-1),T=o("span",{class:"mar5 color999"},null,-1),q=o("span",{class:"mar5 color999"},null,-1),S=o("span",{class:"mar5 color999"},null,-1),x=o("div",{class:"clear"},null,-1),U=o("div",{id:"main2s",class:"schartmain"},null,-1);var D=h(_,[["render",function(e,a,p,h,g,f){const b=l("el-button"),I=l("el-button-group"),y=l("el-date-picker"),_=l("el-form-item"),D=l("el-option"),j=l("el-select"),z=l("el-form"),$=l("el-table-column"),B=l("el-table"),M=l("el-card"),O=l("el-col"),P=l("el-row");return t(),r("div",null,[o("div",v,[o("div",k,[o("div",V,[d(I,null,{default:n((()=>[d(b,{icon:"el-icon-s-grid",onClick:a[0]||(a[0]=e=>f.goTo())},{default:n((()=>[s("基础数据")])),_:1}),d(b,{icon:"el-icon-s-marketing",onClick:a[1]||(a[1]=e=>f.goTo2())},{default:n((()=>[s("订单增长")])),_:1}),d(b,{type:"primary",icon:"el-icon-s-order"},{default:n((()=>[s("订单状态占比")])),_:1})])),_:1})]),o("div",C,[d(z,{"label-width":"80px",inline:"",size:"small"},{default:n((()=>[d(_,{label:"停入时间"},{default:n((()=>[d(y,{size:"small",modelValue:h.form.time,"onUpdate:modelValue":a[2]||(a[2]=e=>h.form.time=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",class:"datepicker",onChange:h.getQueryDate},null,8,["modelValue","onChange"])])),_:1}),"0"==h.menuType?(t(),i(_,{key:0,label:"选择层级"},{default:n((()=>[d(j,{clearable:"",modelValue:h.query.areaId,"onUpdate:modelValue":a[3]||(a[3]=e=>h.query.areaId=e),filterable:"",placeholder:"所有区域",class:"w100",onChange:h.getStreet},{default:n((()=>[(t(!0),r(u,null,m(h.form.areas,(e=>(t(),i(D,{key:e.id,label:e.area_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),w,d(j,{clearable:"",modelValue:h.query.streetId,"onUpdate:modelValue":a[4]||(a[4]=e=>h.query.streetId=e),filterable:"",placeholder:"所有街道",class:"w100",onChange:h.getRoad},{default:n((()=>[(t(!0),r(u,null,m(h.form.streets,(e=>(t(),i(D,{key:e.id,label:e.street_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),T,d(j,{clearable:"",modelValue:h.query.roadId,"onUpdate:modelValue":a[5]||(a[5]=e=>h.query.roadId=e),filterable:"",placeholder:"所有路内",class:"w100"},{default:n((()=>[(t(!0),r(u,null,m(h.form.roads,(e=>(t(),i(D,{key:e.id,label:e.road_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):c("",!0),"1"==h.menuType?(t(),i(_,{key:1,label:"选择层级"},{default:n((()=>[d(j,{clearable:"",modelValue:h.query.areaId,"onUpdate:modelValue":a[6]||(a[6]=e=>h.query.areaId=e),filterable:"",placeholder:"所有区域",class:"w100",onChange:h.getStreet},{default:n((()=>[(t(!0),r(u,null,m(h.form.areas,(e=>(t(),i(D,{key:e.id,label:e.area_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),q,d(j,{clearable:"",modelValue:h.query.streetId,"onUpdate:modelValue":a[7]||(a[7]=e=>h.query.streetId=e),filterable:"",placeholder:"所有街道",class:"w100",onChange:h.getParks},{default:n((()=>[(t(!0),r(u,null,m(h.form.streets,(e=>(t(),i(D,{key:e.id,label:e.street_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),S,d(j,{clearable:"",modelValue:h.query.parkId,"onUpdate:modelValue":a[8]||(a[8]=e=>h.query.parkId=e),filterable:"",placeholder:"所有停车场",class:"w100"},{default:n((()=>[(t(!0),r(u,null,m(h.form.roads,(e=>(t(),i(D,{key:e.id,label:e.park_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):c("",!0),d(_,null,{default:n((()=>[d(b,{size:"small",type:"primary",icon:"el-icon-search",onClick:h.handleSearch},{default:n((()=>[s("查询")])),_:1},8,["onClick"])])),_:1})])),_:1})]),x]),d(P,{gutter:20},{default:n((()=>[d(O,{span:12},{default:n((()=>[d(M,{shadow:"hover"},{default:n((()=>[d(B,{data:h.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header",onSelectionChange:e.handleSelectionChange},{default:n((()=>[d($,{type:"index",label:"序号",width:"55",align:"center"}),d($,{prop:"status",label:"订单状态",align:"center"}),d($,{prop:"num",label:"数量",align:"center"}),d($,{prop:"proportion",label:"占比",align:"center"})])),_:1},8,["data","onSelectionChange"])])),_:1})])),_:1}),d(O,{span:12},{default:n((()=>[d(M,{shadow:"hover"},{default:n((()=>[U])),_:1})])),_:1})])),_:1})])])}]]);export{D as default};
