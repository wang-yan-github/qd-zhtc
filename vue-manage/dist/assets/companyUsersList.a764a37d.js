import{f as e,b as l,q as a,r as t,o as n,h as i,i as d,k as o,l as c,m as s,t as r,F as u,j as m,L as p}from"./vendor.ac52fd94.js";import{_ as h,bB as g}from"./index.1d57ac4a.js";const f={name:"streelist",data:()=>({tableH:0}),setup(){const t=e({address:"",name:"",pageIndex:1,pageSize:15,pageSize2:6}),n=l([]),i=l([]),d=l(0),o=l(0),c=()=>{g(t).then((e=>{n.value=e.list,d.value=e.pageTotal||50,i.value=e.list,o.value=e.pageTotal||50}))};c();const s=l(!1),r=l(!1),u=l(!1),m=l(!1);let h=e({name:"",address:""}),f=-1;return{query:t,tableData:n,tableData2:i,pageTotal:d,pageTotal2:o,editVisible:s,viewVisible:r,bindCarVisible:u,cancelBindCar:m,formArr:[{value1:"",value2:""}],form:h,dialogT:"新增",handleSearch:()=>{t.pageIndex=1,c()},handlePageChange:e=>{t.pageIndex=e,c()},handleDelete:e=>{p.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{a.success("删除成功"),n.value.splice(e,1)})).catch((()=>{}))},carDelete:e=>{p.confirm("确定要解除绑定吗？","提示",{type:"warning"}).then((()=>{a.success("解绑成功"),n.value.splice(e,1)})).catch((()=>{}))},handleEdit:(e,l,a)=>{a||(f=e,Object.keys(h).forEach((e=>{h[e]=l[e]}))),s.value=!0},handleView:(e,l)=>{f=e,Object.keys(h).forEach((e=>{h[e]=l[e]})),r.value=!0},bindCar:(e,l)=>{f=e,Object.keys(h).forEach((e=>{h[e]=l[e]})),u.value=!0},cancelBind:(e,l)=>{f=e,Object.keys(h).forEach((e=>{h[e]=l[e]})),m.value=!0},saveEdit:()=>{s.value=!1,a.success(`修改第 ${f+1} 行成功`),Object.keys(h).forEach((e=>{n.value[f][e]=h[e]}))},multipleSelection:[],value:!0,activeName:"first"}},methods:{addItem(){this.formArr.push({value1:"",value2:""}),this.$refs.addTable.clearSelection()},handleSelectionChange(e){this.selectedData=e},handleDeleteAll(){var e=this,l=this.selectedData;l?(l.forEach((function(l,a){e.tableData.forEach((function(a,t){l===a&&e.tableData.splice(t,1)}))})),a.success("删除成功"),this.$refs.multipleTable.clearSelection()):a.warning("请选择一条记录")}},created(){let e=document.documentElement.clientHeight||document.body.clientHeight;this.tableH=e-308+"px"}},b={class:"container"},y={class:"handle-box"},C={class:"left-panel"},v={class:"right-panel"},V=d("span",{class:"ml5"},null,-1),w=d("div",{class:"clear"},null,-1),_={class:"pagination"},k={class:"dialog-footer"},z={class:"handle-box"},x={class:"right-panel"},D=d("div",{class:"clear"},null,-1),q=d("div",{class:"mt20"},null,-1),I={class:"w desctable",ref:"addTable"},S=d("colgroup",null,[d("col"),d("col"),d("col",{class:"w100"})],-1),T=d("th",null,"车牌号",-1),E=d("th",null,"车牌类型",-1),U={align:"center"},$={class:"dialog-footer"},j={class:"handle-box"},B={class:"left-panel"},A={class:"right-panel"},H=d("span",{class:"ml5"},null,-1),O=d("div",{class:"clear"},null,-1),P={class:"pagination"},N=d("div",{class:"mt20"},null,-1),F=d("table",{class:"desctable mgb20 w"},[d("tr",null,[d("td",{class:"tit is-bordered-label",width:"100"},[d("i",{class:"el-icon-office-building"}),s(" 公司名称")]),d("td",null,"老城湟水湾"),d("td",{class:"tit is-bordered-label",width:"100"},[d("i",{class:"el-icon-connection"}),s(" 绑定车辆数")]),d("td",null,"26")]),d("tr",null,[d("td",{class:"tit",width:"100"},[d("i",{class:"el-icon-user"}),s(" 联系人")]),d("td",null,"王文文"),d("td",{class:"tit",width:"100"},[d("i",{class:"el-icon-mobile-phone"}),s(" 联系方式")]),d("td",null,"13023212321")]),d("tr",null,[d("td",{class:"tit",width:"100"},[d("i",{class:"el-icon-location-information"}),s(" 公司地址")]),d("td",{colspan:"3"},"老城湟水湾街道24号")])],-1),L=d("div",{class:"mt20"},null,-1),G={class:"pagination"},J={class:"dialog-footer"};var K=h(f,[["render",function(e,l,a,p,h,g){const f=t("el-button"),K=t("el-input"),M=t("el-table-column"),Q=t("el-table"),R=t("el-pagination"),W=t("el-form-item"),X=t("el-form"),Y=t("el-dialog"),Z=t("el-tab-pane"),ee=t("el-col"),le=t("el-row"),ae=t("el-tabs");return n(),i("div",null,[d("div",b,[d("div",y,[d("div",C,[o(f,{type:"primary",size:"small",icon:"el-icon-plus",onClick:l[0]||(l[0]=e=>p.handleEdit(0,null,!0))},{default:c((()=>[s("添加")])),_:1}),o(f,{type:"danger",size:"small",icon:"el-icon-delete",onClick:l[1]||(l[1]=e=>g.handleDeleteAll())},{default:c((()=>[s("批量删除")])),_:1})]),d("div",v,[o(K,{size:"small",modelValue:p.query.name,"onUpdate:modelValue":l[2]||(l[2]=e=>p.query.name=e),placeholder:"公司名称",class:"handle-input mr10"},null,8,["modelValue"]),o(K,{size:"small",modelValue:p.query.name,"onUpdate:modelValue":l[3]||(l[3]=e=>p.query.name=e),placeholder:"联系人",class:"handle-input mr10"},null,8,["modelValue"]),o(K,{size:"small",modelValue:p.query.name,"onUpdate:modelValue":l[4]||(l[4]=e=>p.query.name=e),placeholder:"联系方式",class:"handle-input mr10"},null,8,["modelValue"]),V,o(f,{size:"small",type:"primary",icon:"el-icon-search",onClick:p.handleSearch},{default:c((()=>[s("查询")])),_:1},8,["onClick"])]),w]),o(Q,{data:p.tableData,border:"",class:"table","max-height":h.tableH,ref:"multipleTable","header-cell-class-name":"table-header",onSelectionChange:g.handleSelectionChange},{default:c((()=>[o(M,{type:"selection",width:"55",align:"center"}),o(M,{pro:"ID",label:"ID",width:"55",align:"center"},{default:c((e=>[s(r(e.row.id),1)])),_:1}),o(M,{prop:"name",label:"公司名称",align:"center"}),o(M,{label:"联系人",width:"180",align:"center"},{default:c((e=>[s(r(e.row.money),1)])),_:1}),o(M,{prop:"addtimes",label:"联系方式",align:"center",width:"180"}),o(M,{prop:"logintimes",label:"公司地址",align:"center"}),o(M,{label:"操作",width:"280",align:"center"},{default:c((e=>[o(f,{size:"mini",type:"text",icon:"el-icon-view",onClick:l=>p.handleView(e.$index,e.row)},{default:c((()=>[s("查看 ")])),_:2},1032,["onClick"]),o(f,{size:"mini",type:"text",icon:"el-icon-edit",onClick:l=>p.handleEdit(e.$index,e.row,!1)},{default:c((()=>[s("编辑 ")])),_:2},1032,["onClick"]),o(f,{size:"mini",type:"text",icon:"el-icon-check",onClick:l=>p.bindCar(e.$index,e.row,!1)},{default:c((()=>[s("绑定 ")])),_:2},1032,["onClick"]),o(f,{size:"mini",type:"text",icon:"el-icon-close",onClick:l=>p.cancelBind(e.$index,e.row,!1)},{default:c((()=>[s("解绑 ")])),_:2},1032,["onClick"]),o(f,{size:"mini",type:"text",icon:"el-icon-delete",class:"red",onClick:l=>p.handleDelete(e.$index,e.row)},{default:c((()=>[s("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","max-height","onSelectionChange"]),d("div",_,[o(R,{background:"",layout:"total, prev, pager, next","current-page":p.query.pageIndex,"page-size":p.query.pageSize,total:p.pageTotal,onCurrentChange:p.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),o(Y,{title:p.dialogT,modelValue:p.editVisible,"onUpdate:modelValue":l[10]||(l[10]=e=>p.editVisible=e),width:"30%"},{footer:c((()=>[d("span",k,[o(f,{onClick:l[9]||(l[9]=e=>p.editVisible=!1)},{default:c((()=>[s("取 消")])),_:1}),o(f,{type:"primary",onClick:p.saveEdit},{default:c((()=>[s("确 定")])),_:1},8,["onClick"])])])),default:c((()=>[o(X,{"label-width":"70px"},{default:c((()=>[o(W,{label:"公司名称"},{default:c((()=>[o(K,{modelValue:p.form.name,"onUpdate:modelValue":l[5]||(l[5]=e=>p.form.name=e)},null,8,["modelValue"])])),_:1}),o(W,{label:"联系人"},{default:c((()=>[o(K,{modelValue:p.form.name,"onUpdate:modelValue":l[6]||(l[6]=e=>p.form.name=e)},null,8,["modelValue"])])),_:1}),o(W,{label:"联系方式"},{default:c((()=>[o(K,{modelValue:p.form.name,"onUpdate:modelValue":l[7]||(l[7]=e=>p.form.name=e)},null,8,["modelValue"])])),_:1}),o(W,{label:"公司地址"},{default:c((()=>[o(K,{modelValue:p.form.name,"onUpdate:modelValue":l[8]||(l[8]=e=>p.form.name=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["title","modelValue"]),o(Y,{title:"绑定车辆",modelValue:p.bindCarVisible,"onUpdate:modelValue":l[13]||(l[13]=e=>p.bindCarVisible=e),width:"50%"},{footer:c((()=>[d("span",$,[o(f,{onClick:l[12]||(l[12]=e=>p.bindCarVisible=!1)},{default:c((()=>[s("取 消")])),_:1}),o(f,{type:"primary",onClick:p.saveEdit},{default:c((()=>[s("确 定")])),_:1},8,["onClick"])])])),default:c((()=>[d("div",z,[d("div",x,[o(f,{type:"primary",size:"small",icon:"el-icon-download"},{default:c((()=>[s("批量导入")])),_:1})]),D]),q,d("table",I,[S,d("thead",null,[T,E,d("th",null,[o(f,{round:"",size:"mini",type:"primary",icon:"el-icon-plus",onClick:l[11]||(l[11]=e=>g.addItem())})])]),d("tbody",null,[(n(!0),i(u,null,m(p.formArr,((l,a)=>(n(),i("tr",{key:a},[d("td",null,[o(K,{size:"mini"})]),d("td",null,[o(K,{size:"mini"})]),d("td",U,[o(f,{round:"",size:"mini",type:"danger",icon:"el-icon-delete",onClick:l=>e.delItem(a)},null,8,["onClick"])])])))),128))])],512)])),_:1},8,["modelValue"]),o(Y,{title:"解绑车辆",modelValue:p.cancelBindCar,"onUpdate:modelValue":l[15]||(l[15]=e=>p.cancelBindCar=e),width:"50%"},{default:c((()=>[d("div",j,[d("div",B,[o(f,{type:"danger",size:"small",icon:"el-icon-circle-close"},{default:c((()=>[s("批量解绑")])),_:1})]),d("div",A,[o(K,{size:"small",modelValue:p.query.name,"onUpdate:modelValue":l[14]||(l[14]=e=>p.query.name=e),placeholder:"车牌号",class:"handle-input mr10"},null,8,["modelValue"]),H,o(f,{size:"small",type:"primary",icon:"el-icon-search",onClick:p.handleSearch},{default:c((()=>[s("查询")])),_:1},8,["onClick"])]),O]),o(Q,{data:p.tableData2,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:c((()=>[o(M,{type:"selection",width:"55",align:"center"}),o(M,{pro:"ID",label:"ID",width:"55",align:"center"},{default:c((e=>[s(r(e.row.id),1)])),_:1}),o(M,{prop:"money",label:"车牌号",width:"160",align:"center"}),o(M,{prop:"roles",label:"车牌类型",align:"center"}),o(M,{label:"操作",width:"160",align:"center"},{default:c((e=>[o(f,{size:"mini",type:"text",icon:"el-icon-close",onClick:l=>p.carDelete(e.$index,e.row,!1)},{default:c((()=>[s("解绑 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),d("div",P,[o(R,{background:"",layout:"total, prev, pager, next","current-page":p.query.pageIndex,"page-size":p.query.pageSize2,total:p.pageTotal,onCurrentChange:p.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])),_:1},8,["modelValue"]),o(Y,{title:"查看详情",modelValue:p.viewVisible,"onUpdate:modelValue":l[18]||(l[18]=e=>p.viewVisible=e),width:"50%"},{footer:c((()=>[d("span",J,[o(f,{onClick:l[17]||(l[17]=e=>p.viewVisible=!1)},{default:c((()=>[s("关 闭")])),_:1})])])),default:c((()=>[o(ae,{type:"card",modelValue:p.activeName,"onUpdate:modelValue":l[16]||(l[16]=e=>p.activeName=e)},{default:c((()=>[o(Z,{label:"基本信息",name:"first"},{default:c((()=>[N,F])),_:1}),o(Z,{label:"绑定车辆信息",name:"second"},{default:c((()=>[L,o(le,null,{default:c((()=>[o(ee,{span:24},{default:c((()=>[o(X,{inline:"",size:"small"},{default:c((()=>[o(W,null,{default:c((()=>[o(K,{placeholder:"车牌号"})])),_:1}),o(W,null,{default:c((()=>[o(f,{type:"primary"},{default:c((()=>[s("查询")])),_:1})])),_:1})])),_:1}),o(Q,{data:p.tableData2,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:c((()=>[o(M,{pro:"ID",label:"ID",width:"55",align:"center"},{default:c((e=>[s(r(e.row.id),1)])),_:1}),o(M,{prop:"money",label:"车牌号",width:"160",align:"center"}),o(M,{prop:"roles",label:"车牌类型",align:"center"}),o(M,{label:"操作",width:"160",align:"center"},{default:c((e=>[o(f,{size:"mini",type:"text",icon:"el-icon-close",onClick:l=>p.carDelete(e.$index,e.row,!1)},{default:c((()=>[s("解绑 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),d("div",G,[o(R,{background:"",layout:"total, prev, pager, next","current-page":p.query.pageIndex,"page-size":p.query.pageSize2,total:p.pageTotal,onCurrentChange:p.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])}]]);export{K as default};
