import{f as e,b as a,q as l,r as t,o as r,h as d,i as n,k as i,l as o,I as s,F as c,j as u,c as m,m as h,t as p,L as b}from"./vendor.ac52fd94.js";import{_ as g,bi as f,a5 as _,a6 as w,U as V}from"./index.1d57ac4a.js";import{U as v}from"./UE.013b43f7.js";import{F as y}from"./file_url.ec979fed.js";const I={name:"equipmentwarn",components:{Ueditor:v},data:()=>({tableH:0,imgViewUrl:y.file_hx_img_url}),setup(){const t=e({berthNoOrCode:"",areaId:"",streetId:"",roadId:"",checked:!1,pageIndex:1,pageSize:15}),r=a([]),d=a(0),n=()=>{f(t).then((e=>{r.value=e.data.list,d.value=e.data.total}))};n();const i=e({}),o=()=>{_(i).then((e=>{m.areas=e.data}))};o();let s=e({areaId:t.areaId});const c=e({streetId:t.streetId}),u=a(!1);let m=e({areas:[],streets:[],roads:[]}),h=-1;return{getArea:o,getStreet:()=>{s.areaId=t.areaId,m.roads=[],t.roadId="",t.streetId="",w(s).then((e=>{m.streets=e.data}))},getRoad:()=>{c.streetId=t.streetId,t.roadId="",V(c).then((e=>{m.roads=e.data}))},query:t,tableData:r,pageTotal:d,editVisible:u,form:m,dialogT:"新增",handleSearch:()=>{t.pageIndex=1,n()},handlePageChange:e=>{t.pageIndex=e,n()},handleDelete:e=>{b.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{l.success("删除成功"),r.value.splice(e,1)})).catch((()=>{}))},handleEdit:(e,a)=>{h=e,Object.keys(m).forEach((e=>{m[e]=a[e]})),u.value=!0},handleView:(e,a)=>{b.confirm("将解除车牌现有绑定者，重新绑定到申诉用户，确定审核通过吗？","提示",{type:"warning"}).then((()=>{l.success("解除成功"),that.tableData.splice(indexI,1)})).catch((()=>{l.info("取消解除")}))},saveEdit:()=>{u.value=!1,l.success(`修改第 ${h+1} 行成功`),Object.keys(m).forEach((e=>{r.value[h][e]=m[e]}))},multipleSelection:[],dialogImageUrl:"",ppVisible:!1}},created(){let e=document.documentElement.clientHeight||document.body.clientHeight;this.tableH=e-308+"px"},methods:{handleRemove(e,a){console.log(e,a)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.ppVisible=!0},imgurl:function(e){if(""!=e&&null!=e)return this.imgViewUrl+e},handleSelectionChange(e){this.selectedData=e},handleDeleteAll(){var e=this,a=this.selectedData;a?(a.forEach((function(a,l){e.tableData.forEach((function(l,t){a===l&&e.tableData.splice(t,1)}))})),l.success("删除成功"),this.$refs.multipleTable.clearSelection()):l.warning("请选择一条记录")}}},C={class:"container"},x={class:"handle-box"},U={class:"left-panel"},k=n("div",{class:"clear"},null,-1),q={class:"pagination"},S={class:"dialog-footer"},z=["src"];var D=g(I,[["render",function(e,a,l,b,g,f){const _=t("el-input"),w=t("el-form-item"),V=t("el-option"),v=t("el-select"),y=t("el-button"),I=t("el-form"),D=t("el-table-column"),E=t("el-image"),j=t("el-table"),H=t("el-pagination"),O=t("el-dialog");return r(),d("div",null,[n("div",C,[n("div",x,[n("div",U,[i(I,{inline:"","label-width":"80",class:"lineH0"},{default:o((()=>[i(w,{label:"",class:"search-mb0"},{default:o((()=>[i(_,{onKeyup:a[0]||(a[0]=s((e=>b.handleSearch()),["enter"])),size:"small",modelValue:b.query.berthNoOrCode,"onUpdate:modelValue":a[1]||(a[1]=e=>b.query.berthNoOrCode=e),class:"handle-input",placeholder:"输入查询内容"},null,8,["modelValue"])])),_:1}),i(w,{label:"",class:"search-mb0"},{default:o((()=>[i(v,{clearable:"",modelValue:b.query.areaId,"onUpdate:modelValue":a[2]||(a[2]=e=>b.query.areaId=e),filterable:"",size:"small",placeholder:"所有区域",class:"w100",onChange:b.getStreet},{default:o((()=>[(r(!0),d(c,null,u(b.form.areas,(e=>(r(),m(V,{key:e.id,label:e.area_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),i(w,{label:"",class:"search-mb0"},{default:o((()=>[i(v,{clearable:"",modelValue:b.query.streetId,"onUpdate:modelValue":a[3]||(a[3]=e=>b.query.streetId=e),filterable:"",size:"small",placeholder:"所有街道",class:"w100",onChange:b.getRoad},{default:o((()=>[(r(!0),d(c,null,u(b.form.streets,(e=>(r(),m(V,{key:e.id,label:e.street_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),i(w,{label:"",class:"search-mb0"},{default:o((()=>[i(v,{clearable:"",modelValue:b.query.roadId,"onUpdate:modelValue":a[4]||(a[4]=e=>b.query.roadId=e),filterable:"",size:"small",placeholder:"所有路内",class:"w100"},{default:o((()=>[(r(!0),d(c,null,u(b.form.roads,(e=>(r(),m(V,{key:e.id,label:e.road_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(w,{label:"",class:"search-mb0"},{default:o((()=>[i(y,{size:"small",type:"primary",icon:"el-icon-search",onClick:b.handleSearch},{default:o((()=>[h("查询")])),_:1},8,["onClick"])])),_:1})])),_:1})]),k]),i(j,{data:b.tableData,border:"",class:"table",ref:"multipleTable","max-height":g.tableH,"header-cell-class-name":"table-header",onSelectionChange:f.handleSelectionChange},{default:o((()=>[i(D,{type:"index",label:"序号",width:"55",align:"center"}),i(D,{prop:"berth_no",align:"center",width:"300",label:"设备编号"},{default:o((e=>[h(p(e.row.berth_no),1)])),_:1}),i(D,{prop:"device_code",align:"center",width:"200",label:"对应泊位编号"},{default:o((e=>[h(p(e.row.device_code),1)])),_:1}),i(D,{prop:"area_name",align:"center",label:"路内"},{default:o((e=>[h(p(e.row.road_name),1)])),_:1}),i(D,{prop:"alarm_type",align:"center",width:"180",label:"报警类型"},{default:o((e=>[h(p(e.row.alarm_type),1)])),_:1}),i(D,{label:"报警图片",align:"center",width:"100"},{default:o((e=>[i(E,{class:"table-td-thumb","hide-on-click-modal":"true","preview-teleported":"true",src:f.imgurl(e.row.file_url),"preview-src-list":[f.imgurl(e.row.file_url)]},null,8,["src","preview-src-list"])])),_:1}),i(D,{prop:"alarm_type",align:"center",width:"180",label:"发生时间"},{default:o((e=>[h(p(e.row.time_occurrence),1)])),_:1})])),_:1},8,["data","max-height","onSelectionChange"]),n("div",q,[i(H,{background:"",layout:"total, prev, pager, next","current-page":b.query.pageIndex,"page-size":b.query.pageSize,total:b.pageTotal,onCurrentChange:b.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),i(O,{title:"填写拒绝原因",modelValue:b.editVisible,"onUpdate:modelValue":a[7]||(a[7]=e=>b.editVisible=e),width:"35%"},{footer:o((()=>[n("span",S,[i(y,{onClick:a[6]||(a[6]=e=>b.editVisible=!1)},{default:o((()=>[h("取 消")])),_:1}),i(y,{type:"primary",onClick:b.saveEdit},{default:o((()=>[h("确 定")])),_:1},8,["onClick"])])])),default:o((()=>[i(I,{"label-width":"70px",size:"small"},{default:o((()=>[i(_,{modelValue:b.form.name,"onUpdate:modelValue":a[5]||(a[5]=e=>b.form.name=e),type:"textarea",rows:6},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),i(O,{modelValue:b.ppVisible,"onUpdate:modelValue":a[8]||(a[8]=e=>b.ppVisible=e)},{default:o((()=>[n("img",{width:"100%",src:b.dialogImageUrl,alt:""},null,8,z)])),_:1},8,["modelValue"])])}]]);export{D as default};
