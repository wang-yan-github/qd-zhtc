import{f as e,b as a,r as l,o as t,h as r,i as o,k as n,l as d,m as s,c as i,F as u,j as m,p as c,s as p,x as g}from"./vendor.ac52fd94.js";import{i as h}from"./index.9abe9c67.js";import{_ as f,a5 as y,a6 as b,U as v,l as I,ae as _,af as x,ag as k}from"./index.1d57ac4a.js";const C={name:"orderTongji",setup(){const l=localStorage.getItem("menuType"),t=e({areaId:"",streetId:"",roadId:"",parkId:"",startTime:"",endTime:"",pageIndex:1,pageSize:15}),r=a([]);e({time:""});let o=a({time:"",areaId:"",streetId:"",roadId:"",areas:[],streets:[],roads:[],timeList:[],orderNumList:[],payNumList:[]});const n=e({timeList:[],orderNumList:[],payNumList:[]}),d=e({}),s=()=>{y(d).then((e=>{o.value.areas=e.data}))};s();let i=e({areaId:t.areaId});const u=e({streetId:t.streetId});let m=a([]);const c=a(0),p=()=>{_(t).then((e=>{r.value=e.data.list,c.value=e.data.total})),x(t).then((e=>{f.xAxis[0].data=e.data.timeList,f.series[0].data=e.data.orderNumList,f.series[1].data=e.data.payNumList;var a=document.getElementById("main");h(a).setOption(f),console.log(f.xAxis)}))};p();const g=e=>`${e.getFullYear()}-${e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1)}-${e.getDate()>=10?e.getDate():"0"+e.getDate()}`,f={title:{text:"近八天订单增长分析",show:!0,textStyle:{fontSize:16,fontWeight:"normal",color:"#303133"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["订单总数","缴费订单数"]},grid:{left:"20px",right:"36px",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:["1","2"]}],yAxis:[{type:"value"}],series:[{name:"订单总数",type:"line",areaStyle:{},emphasis:{focus:"series"},data:n.orderNumList},{name:"缴费订单数",type:"line",areaStyle:{},emphasis:{focus:"series"},data:n.payNumList}]};return{query:t,pageTotal:c,tableData:r,form:o,tableValue:n,queryArea:d,queryStreet:i,queryRoad:u,options4:f,temp:m,menuType:l,getArea:s,getStreet:()=>{i.areaId=t.areaId,t.roadId="",t.streetId="",b(i).then((e=>{o.value.streets=e.data}))},getQueryDate:()=>{null==o.value.time||[]==o.value.time||""==o.value.time?(t.startTime="",t.endTime=""):(t.startTime=g(o.value.time[0]),t.endTime=g(o.value.time[1])),t.startTime=g(o.value.time[0]),t.endTime=g(o.value.time[1])},getRoad:()=>{t.roadId="",u.streetId=t.streetId,v(u).then((e=>{o.value.roads=e.data}))},getParks:()=>{u.streetId=t.streetId,t.parkId="",I(u).then((e=>{o.value.roads=e.data}))},handleSearch:()=>{t.pageIndex=1,p()},handlePageChange:e=>{t.pageIndex=e,p()},exportExcel:()=>{k(t).then((e=>{const a=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.href=a,l.setAttribute("download","订单增长.xls"),document.body.appendChild(l),l.click()}))}}},methods:{goTo(){this.$router.push("/orderstatic")},goTo2(){this.$router.push("/orderstaticthree")},init(){var e=document.getElementById("main");e.removeAttribute("_echarts_instance_"),h(e).setOption(this.options4)}},mounted(){this.init()}},V=e=>(p("data-v-5aa0af7a"),e=e(),g(),e),T={class:"container"},q={class:"top-panel"},w={class:"left-panel"},S={class:"right-panel"},L=V((()=>o("span",{class:"mar5 color999"},null,-1))),N=V((()=>o("span",{class:"mar5 color999"},null,-1))),U=V((()=>o("span",{class:"mar5 color999"},null,-1))),z=V((()=>o("span",{class:"mar5 color999"},null,-1))),A=V((()=>o("div",{class:"clear"},null,-1))),D={class:"pagination"},j=V((()=>o("div",{id:"main",class:"schartmain"},null,-1)));var E=f(C,[["render",function(e,a,p,g,h,f){const y=l("el-button"),b=l("el-button-group"),v=l("el-date-picker"),I=l("el-form-item"),_=l("el-option"),x=l("el-select"),k=l("el-form"),C=l("el-table-column"),V=l("el-table"),E=l("el-pagination"),P=l("el-card"),R=l("el-col"),$=l("el-row");return t(),r("div",null,[o("div",T,[o("div",q,[o("div",w,[n(b,null,{default:d((()=>[n(y,{icon:"el-icon-s-grid",onClick:a[0]||(a[0]=e=>f.goTo())},{default:d((()=>[s("基础数据 ")])),_:1}),n(y,{type:"primary",icon:"el-icon-s-marketing"},{default:d((()=>[s("订单增长 ")])),_:1}),n(y,{icon:"el-icon-s-order",onClick:a[1]||(a[1]=e=>f.goTo2())},{default:d((()=>[s("订单状态占比 ")])),_:1})])),_:1})]),o("div",S,[n(k,{"label-width":"80px",inline:"",size:"small"},{default:d((()=>[n(I,{label:"停入时间"},{default:d((()=>[n(v,{size:"small",modelValue:g.form.time,"onUpdate:modelValue":a[2]||(a[2]=e=>g.form.time=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",class:"datepicker",onChange:g.getQueryDate},null,8,["modelValue","onChange"])])),_:1}),"0"==g.menuType?(t(),i(I,{key:0,label:"选择层级"},{default:d((()=>[n(x,{clearable:"",modelValue:g.query.areaId,"onUpdate:modelValue":a[3]||(a[3]=e=>g.query.areaId=e),filterable:"",placeholder:"所有区域",class:"w100",onChange:g.getStreet},{default:d((()=>[(t(!0),r(u,null,m(g.form.areas,(e=>(t(),i(_,{key:e.id,label:e.area_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),L,n(x,{clearable:"",modelValue:g.query.streetId,"onUpdate:modelValue":a[4]||(a[4]=e=>g.query.streetId=e),filterable:"",placeholder:"所有街道",class:"w100",onChange:g.getRoad},{default:d((()=>[(t(!0),r(u,null,m(g.form.streets,(e=>(t(),i(_,{key:e.id,label:e.street_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),N,n(x,{clearable:"",modelValue:g.query.roadId,"onUpdate:modelValue":a[5]||(a[5]=e=>g.query.roadId=e),filterable:"",placeholder:"所有路内",class:"w100"},{default:d((()=>[(t(!0),r(u,null,m(g.form.roads,(e=>(t(),i(_,{key:e.id,label:e.road_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):c("",!0),"1"==g.menuType?(t(),i(I,{key:1,label:"选择层级"},{default:d((()=>[n(x,{clearable:"",modelValue:g.query.areaId,"onUpdate:modelValue":a[6]||(a[6]=e=>g.query.areaId=e),filterable:"",placeholder:"所有区域",class:"w100",onChange:g.getStreet},{default:d((()=>[(t(!0),r(u,null,m(g.form.areas,(e=>(t(),i(_,{key:e.id,label:e.area_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),U,n(x,{clearable:"",modelValue:g.query.streetId,"onUpdate:modelValue":a[7]||(a[7]=e=>g.query.streetId=e),filterable:"",placeholder:"所有街道",class:"w100",onChange:g.getParks},{default:d((()=>[(t(!0),r(u,null,m(g.form.streets,(e=>(t(),i(_,{key:e.id,label:e.street_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),z,n(x,{clearable:"",modelValue:g.query.parkId,"onUpdate:modelValue":a[8]||(a[8]=e=>g.query.parkId=e),filterable:"",placeholder:"所有停车场",class:"w100"},{default:d((()=>[(t(!0),r(u,null,m(g.form.roads,(e=>(t(),i(_,{key:e.id,label:e.park_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):c("",!0),n(I,null,{default:d((()=>[n(y,{size:"small",type:"primary",icon:"el-icon-search",onClick:g.handleSearch},{default:d((()=>[s("查询 ")])),_:1},8,["onClick"])])),_:1}),n(I,null,{default:d((()=>[n(y,{size:"small",type:"success",icon:"el-icon-upload2",onClick:g.exportExcel},{default:d((()=>[s("导出 ")])),_:1},8,["onClick"])])),_:1})])),_:1})]),A]),n($,{gutter:20},{default:d((()=>[n(R,{span:12},{default:d((()=>[n(P,{shadow:"hover"},{default:d((()=>[n(V,{data:g.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header",onSelectionChange:e.handleSelectionChange},{default:d((()=>[n(C,{type:"index",label:"序号",width:"55",align:"center"}),n(C,{prop:"time",label:"停入时间",align:"center"}),n(C,{prop:"orderNum",label:"订单数量",align:"center"}),n(C,{prop:"payNum",label:"缴费数量",align:"center"}),n(C,{prop:"proportion",label:"缴费占比",align:"center"})])),_:1},8,["data","onSelectionChange"]),o("div",D,[n(E,{background:"",layout:"total, prev, pager, next","current-page":g.query.pageIndex,"page-size":g.query.pageSize,total:g.pageTotal,onCurrentChange:g.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])),_:1})])),_:1}),n(R,{span:12},{default:d((()=>[n(P,{shadow:"hover"},{default:d((()=>[j])),_:1})])),_:1})])),_:1})])])}],["__scopeId","data-v-5aa0af7a"]]);export{E as default};
