import{f as e,b as a,L as l,q as t,r as n,M as r,o as i,h as s,i as o,w as d,c,l as u,m as p,k as _,I as m,p as h,F as g,j as f}from"./vendor.ac52fd94.js";import{_ as v,aY as y,aZ as b,F as k,a_ as w,a$ as C}from"./index.1d57ac4a.js";const x={name:"arealist",data:()=>({tableH:0,formRules:{area_name:[{required:!0,message:"必填项",trigger:"blur"}],area_level:[{required:!0,message:"必填项",trigger:"blur"}]}}),setup(){const n=e({area_name:"",pageIndex:1,pageSize:15});let r=e({area_levels:[],dialogT:""});const i=a([]),s=a(0),o=()=>{b(n).then((e=>{console.log(e.data),i.value=e.data.list,s.value=e.data.total}))};o();let d=e({is_del:"0",dict_type:"areaLevel"});k(d).then((e=>{console.log(e),r.area_levels=e.data}));const c=a(!1);let u=e({area_name:"",area_level:"",status:"0",is_del:"0"}),p="";return{query:n,tableData:i,pageTotal:s,editVisible:c,result:r,form:u,dict:d,handleSearch:()=>{n.pageIndex=1,o()},handlePageChange:e=>{n.pageIndex=e,o()},getData:o,handleDelete:(a,n)=>{l.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{let a=e({is_del:"1",id:n.id});w(a).then((e=>{console.log(e),t.success("删除成功")})).then((()=>{o()}))})).catch((()=>{}))},handleEdit:(e,a,l)=>{l?(r.dialogT="新增",p="",u.area_name="",u.area_level=""):(r.dialogT="编辑",p=a.id,Object.keys(u).forEach((e=>{u[e]=a[e]}))),c.value=!0},handleStop:(a,n,r)=>{l.confirm("请确定当前操作？","提示",{type:"warning"}).then((()=>{let a=e({status:r,id:n.id});w(a).then((e=>{console.log(e),t.success("操作成功")})).then((()=>{o()}))})).catch((()=>{}))},saveEdit:()=>{if(null==u.area_name||""==u.area_name||null==u.area_level||""==u.area_level)return t.error("参数不可为空！"),!1;if(p){let a=e({id:p,area_name:u.area_name,area_level:u.area_level});w(a).then((e=>{console.log(e),t.success("修改成功")})).then((()=>{o()}))}else C(u).then((e=>{console.log(e.data)})).then((()=>{n.pageIndex=1,o()}));c.value=!1},multipleSelection:[],value:!0,activeName:"first"}},created(){let e=document.documentElement.clientHeight||document.body.clientHeight;this.tableH=e-308+"px"},methods:{handleSelectionChange(e){this.selectedData=e},handleDeleteAll(){l.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{var e=this,a=this.selectedData,l="";a?(a.forEach((function(e,a){l=l+e.id+","})),y({areaIds:l}).then((a=>{t.success("删除成功"),e.getData()}))):t.warning("请选择一条记录")})).catch((()=>{}))}},mounted(){}},V={class:"container"},z={class:"handle-box"},S={class:"left-panel"},D={class:"right-panel"},q=o("div",{class:"clear"},null,-1),E={key:0},I={key:1},T={key:2},H={class:"pagination"},$={class:"dialog-footer"};var j=v(x,[["render",function(e,a,l,t,v,y){const b=n("el-button"),k=n("el-input"),w=n("el-table-column"),C=n("el-tag"),x=n("el-table"),j=n("el-pagination"),A=n("el-form-item"),U=n("el-option"),F=n("el-select"),L=n("el-form"),P=n("el-dialog"),R=r("permission");return i(),s("div",null,[o("div",V,[o("div",z,[o("div",S,[d((i(),c(b,{type:"primary",size:"small",icon:"el-icon-plus",onClick:a[0]||(a[0]=e=>t.handleEdit(0,null,!0))},{default:u((()=>[p("添加")])),_:1})),[[R,["road_arealist_add","park_arealist_add"]]]),d((i(),c(b,{type:"danger",size:"small",icon:"el-icon-delete",onClick:a[1]||(a[1]=e=>y.handleDeleteAll())},{default:u((()=>[p("批量删除")])),_:1})),[[R,["road_arealist_deleteAll","park_arealist_deleteAll"]]])]),o("div",D,[_(k,{onKeyup:a[2]||(a[2]=m((e=>t.handleSearch()),["enter"])),size:"small",modelValue:t.query.area_name,"onUpdate:modelValue":a[3]||(a[3]=e=>t.query.area_name=e),placeholder:"名称",class:"handle-input mr10"},null,8,["modelValue"]),_(b,{size:"small",type:"primary",icon:"el-icon-search",onClick:t.handleSearch},{default:u((()=>[p("查询")])),_:1},8,["onClick"])]),q]),_(x,{data:t.tableData,border:"",class:"table",ref:"multipleTable","max-height":v.tableH,"header-cell-class-name":"table-header",onSelectionChange:y.handleSelectionChange},{default:u((()=>[_(w,{type:"selection",width:"55",align:"center"}),_(w,{type:"index",label:"序号",width:"55",align:"center"}),_(w,{prop:"area_name",label:"区域名称",align:"center"}),_(w,{prop:"area_level",label:"区域等级",align:"center"},{default:u((e=>[0==e.row.area_level?(i(),s("p",E,"一类")):h("",!0),1==e.row.area_level?(i(),s("p",I,"二类")):h("",!0),2==e.row.area_level?(i(),s("p",T,"三类")):h("",!0)])),_:1}),_(w,{prop:"street_num",label:"街道数量",width:"100",align:"center"}),_(w,{prop:"create_time",label:"添加时间",align:"center"}),_(w,{label:"状态",align:"center",width:"100"},{default:u((e=>[0==e.row.status?(i(),c(C,{key:0,size:"small",type:"0"===e.row.status?"success":"1"===e.row.status?"danger":""},{default:u((()=>[p("启用")])),_:2},1032,["type"])):(i(),c(C,{key:1,size:"small",type:"0"===e.row.status?"success":"1"===e.row.status?"danger":""},{default:u((()=>[p("禁用")])),_:2},1032,["type"]))])),_:1}),_(w,{label:"操作",width:"220",align:"center"},{default:u((e=>[d((i(),c(b,{size:"mini",type:"text",icon:"el-icon-edit",onClick:a=>t.handleEdit(e.$index,e.row,!1)},{default:u((()=>[p("编辑 ")])),_:2},1032,["onClick"])),[[R,["road_arealist_edit","park_arealist_edit"]]]),"0"==e.row.status?d((i(),c(b,{key:0,size:"mini",type:"text",icon:"el-icon-circle-close",onClick:a=>t.handleStop(e.$index,e.row,"1"),class:"red"},{default:u((()=>[p("停用 ")])),_:2},1032,["onClick"])),[[R,["road_arealist_status","park_arealist_status"]]]):h("",!0),"1"==e.row.status?d((i(),c(b,{key:1,size:"mini",type:"text",icon:"el-icon-circle-check",onClick:a=>t.handleStop(e.$index,e.row,"0")},{default:u((()=>[p("启用 ")])),_:2},1032,["onClick"])),[[R,["road_arealist_status","park_arealist_status"]]]):h("",!0),d((i(),c(b,{size:"mini",type:"text",icon:"el-icon-delete",class:"red",onClick:a=>t.handleDelete(e.$index,e.row)},{default:u((()=>[p("删除")])),_:2},1032,["onClick"])),[[R,["road_arealist_delete","park_arealist_delete"]]])])),_:1})])),_:1},8,["data","max-height","onSelectionChange"]),o("div",H,[_(j,{background:"",layout:"total, prev, pager, next","current-page":t.query.pageIndex,"page-size":t.query.pageSize,total:t.pageTotal,onCurrentChange:t.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),_(P,{title:t.result.dialogT,modelValue:t.editVisible,"onUpdate:modelValue":a[7]||(a[7]=e=>t.editVisible=e),width:"30%"},{footer:u((()=>[o("span",$,[_(b,{onClick:a[6]||(a[6]=e=>t.editVisible=!1)},{default:u((()=>[p("取 消")])),_:1}),_(b,{type:"primary",onClick:t.saveEdit},{default:u((()=>[p("确 定")])),_:1},8,["onClick"])])])),default:u((()=>[_(L,{"label-width":"90px",rules:v.formRules,model:t.form},{default:u((()=>[_(A,{label:"区域名称",prop:"area_name"},{default:u((()=>[_(k,{modelValue:t.form.area_name,"onUpdate:modelValue":a[4]||(a[4]=e=>t.form.area_name=e),placeholder:"请输入区域名称"},null,8,["modelValue"])])),_:1}),_(A,{label:"区域等级",prop:"area_level"},{default:u((()=>[_(F,{modelValue:t.form.area_level,"onUpdate:modelValue":a[5]||(a[5]=e=>t.form.area_level=e),placeholder:"请选择",class:"w"},{default:u((()=>[(i(!0),s(g,null,f(t.result.area_levels,((e,a)=>(i(),c(U,{key:a,label:e.label,value:e.dc_value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["title","modelValue"])])}]]);export{j as default};
