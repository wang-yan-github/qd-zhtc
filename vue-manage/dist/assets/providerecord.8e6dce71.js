import{f as e,b as a,L as l,q as t,r as n,o as r,h as i,i as o,k as d,I as s,l as u,m as p,F as c,j as m,c as _,t as h,p as g}from"./vendor.ac52fd94.js";import{_ as y,aT as b,a5 as f,a6 as v,l as k}from"./index.1d57ac4a.js";const w={name:"providerecordA",data:()=>({tableH:0}),setup(){const l=e({area_id:"",street_id:"",park_id:"",order_no:"",pageIndex:1,pageSize:15,start_time:"",end_time:""});let t=e({area_list:[],area_levels:[],query_street_list:[],query_park_list:[]});const n=a([]),r=a(0),i=()=>{b(l).then((e=>{console.log(e.data),n.value=e.data.list,r.value=e.data.total}))};i();f(l).then((e=>{t.area_list=e.data,console.log(e.data)}));let o=e({areaId:l.area_id});const d=e({streetId:l.street_id}),s=a(!1);let u=e({order_no:"",area_level:"",status:"0",is_del:"0",time:""});const p=e=>`${e.getFullYear()}-${e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1)}-${e.getDate()>=10?e.getDate():"0"+e.getDate()}`;return{query:l,tableData:n,pageTotal:r,editVisible:s,result:t,form:u,getQueryDate:()=>{if(null==u.time||""==u.time)return l.start_time="",l.end_time="",!1;l.start_time=p(u.time[0])+" ",console.log(l.start_time),l.end_time=p(u.time[1])+" "},dialogT:"新增",handleSearch:()=>{l.pageIndex=1,i()},handlePageChange:e=>{l.pageIndex=e,i()},getStreetList:()=>{t.query_park_list=[],o.areaId=l.area_id,l.park_id="",l.street_id="",v(o).then((e=>{t.query_street_list=e.data}))},getParkList:e=>{d.streetId=l.street_id,l.park_id="",k(d).then((e=>{t.query_park_list=e.data}))},getData:i,handleDelete:(e,a)=>{},handleEdit:(e,a,l)=>{},handleStop:(e,a)=>{},saveEdit:()=>{},multipleSelection:[],value:!0,activeName:"first"}},methods:{handleSelectionChange(e){this.selectedData=e},handleDeleteAll(){l.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{var e=this,a=this.selectedData;console.log(a);var l="";a?(a.forEach((function(e,a){l=l+e.id+","})),delAreaAll({areaIds:l}).then((a=>{t.success("删除成功"),e.getData()}))):t.warning("请选择一条记录")})).catch((()=>{}))}},mounted(){},created(){let e=document.documentElement.clientHeight||document.body.clientHeight;this.tableH=e-308+"px"}},V={class:"container"},C={class:"handle-box"},q=o("div",{class:"left-panel"},null,-1),x={class:"right-panel"},z=o("span",{class:"dispinline ml5"},null,-1),D=o("span",{class:"dispinline ml5"},null,-1),S=o("span",{class:"dispinline ml5 font14 color666"},"时间：",-1),I=o("span",{class:"dispinline ml5"},null,-1),U=o("div",{class:"clear"},null,-1),E={key:0},H={key:1},L={key:2},T={key:3},A={key:0},P={key:1},j={key:2},M={key:3},$={key:4},F={class:"pagination"},Q={class:"dialog-footer"};var K=y(w,[["render",function(e,a,l,t,y,b){const f=n("el-input"),v=n("el-option"),k=n("el-select"),w=n("el-date-picker"),K=n("el-button"),N=n("el-table-column"),Y=n("el-tag"),B=n("el-table"),G=n("el-pagination"),J=n("el-form-item"),O=n("el-form"),R=n("el-dialog");return r(),i("div",null,[o("div",V,[o("div",C,[q,o("div",x,[d(f,{onKeyup:a[0]||(a[0]=s((e=>t.handleSearch()),["enter"])),size:"small",modelValue:t.query.order_no,"onUpdate:modelValue":a[1]||(a[1]=e=>t.query.order_no=e),placeholder:"订单号或发放人名称",class:"handle-input mr10"},null,8,["modelValue"]),d(k,{modelValue:t.query.area_id,"onUpdate:modelValue":a[2]||(a[2]=e=>t.query.area_id=e),filterable:"",size:"small",placeholder:"所有区域",class:"w100",onChange:a[3]||(a[3]=e=>t.getStreetList())},{default:u((()=>[d(v,{value:""},{default:u((()=>[p("全部")])),_:1}),(r(!0),i(c,null,m(t.result.area_list,((e,a)=>(r(),_(v,{key:a,label:e.area_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),z,d(k,{modelValue:t.query.street_id,"onUpdate:modelValue":a[4]||(a[4]=e=>t.query.street_id=e),filterable:"",size:"small",placeholder:"所有街道",class:"w100",onChange:a[5]||(a[5]=e=>t.getParkList())},{default:u((()=>[d(v,{value:""},{default:u((()=>[p("全部")])),_:1}),(r(!0),i(c,null,m(t.result.query_street_list,((e,a)=>(r(),_(v,{key:a,label:e.street_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),D,d(k,{modelValue:t.query.park_id,"onUpdate:modelValue":a[6]||(a[6]=e=>t.query.park_id=e),filterable:"",size:"small",placeholder:"所有停车场",class:"w100"},{default:u((()=>[d(v,{value:""},{default:u((()=>[p("全部")])),_:1}),(r(!0),i(c,null,m(t.result.query_park_list,((e,a)=>(r(),_(v,{key:a,label:e.park_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),S,d(w,{size:"small",modelValue:t.form.time,"onUpdate:modelValue":a[7]||(a[7]=e=>t.form.time=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",class:"datepicker",onChange:t.getQueryDate},null,8,["modelValue","onChange"]),I,d(K,{size:"small",type:"primary",icon:"el-icon-search",onClick:t.handleSearch},{default:u((()=>[p("查询")])),_:1},8,["onClick"])]),U]),d(B,{data:t.tableData,border:"",class:"table","max-height":y.tableH,ref:"multipleTable","header-cell-class-name":"table-header",onSelectionChange:b.handleSelectionChange},{default:u((()=>[d(N,{type:"index",label:"序号",width:"55",align:"center"}),d(N,{prop:"order_no",label:"订单号",width:"190",align:"center"}),d(N,{prop:"car_no",label:"车牌号",width:"120",align:"center"},{default:u((e=>["1"==e.row.car_type?(r(),_(Y,{key:0,size:"small",textContent:h(e.row.car_no)},null,8,["textContent"])):"2"==e.row.car_type?(r(),_(Y,{key:1,size:"small",type:"success",textContent:h(e.row.car_no)},null,8,["textContent"])):"3"==e.row.car_type?(r(),_(Y,{key:2,size:"small",type:"warning",textContent:h(e.row.car_no)},null,8,["textContent"])):g("",!0)])),_:1}),d(N,{prop:"park_name",label:"所属停车场","min-width":"200",align:"center"}),d(N,{prop:"drivein_time",label:"驶入时间",width:"170",align:"center"}),d(N,{prop:"driveout_time",label:"驶出时间",width:"170",align:"center"}),d(N,{prop:"resitime",label:"停留时间(分)",width:"110",align:"center"}),d(N,{prop:"sum_amount",label:"应收金额",width:"100",align:"center"}),d(N,{prop:"paid_amount",label:"已付金额",width:"100",align:"center"}),d(N,{prop:"status",label:"订单状态",width:"100",align:"center"},{default:u((e=>[1==e.row.status?(r(),i("p",E,"在停")):g("",!0),2==e.row.status?(r(),i("p",H,"待缴费")):g("",!0),3==e.row.status?(r(),i("p",L,"已缴费")):g("",!0),4==e.row.status?(r(),i("p",T,"已完成")):g("",!0)])),_:1}),d(N,{prop:"pay_type",label:"支付方式",align:"center",width:"100"},{default:u((e=>[1==e.row.pay_type?(r(),i("p",A,"包月")):g("",!0),2==e.row.pay_type?(r(),i("p",P,"微信")):g("",!0),3==e.row.pay_type?(r(),i("p",j,"支付宝")):g("",!0),4==e.row.pay_type?(r(),i("p",M,"钱包")):g("",!0),5==e.row.pay_type?(r(),i("p",$,"现金")):g("",!0)])),_:1}),d(N,{prop:"name",label:"发票派放人",width:"100",align:"center"}),d(N,{prop:"invoice_amount",label:"派放金额",width:"100",align:"center"}),d(N,{prop:"provide_time",label:"派放时间",width:"170",align:"center"})])),_:1},8,["data","max-height","onSelectionChange"]),o("div",F,[d(G,{background:"",layout:"total, prev, pager, next","current-page":t.query.pageIndex,"page-size":t.query.pageSize,total:t.pageTotal,onCurrentChange:t.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),d(R,{title:"新增",modelValue:t.editVisible,"onUpdate:modelValue":a[11]||(a[11]=e=>t.editVisible=e),width:"30%"},{footer:u((()=>[o("span",Q,[d(K,{onClick:a[10]||(a[10]=e=>t.editVisible=!1)},{default:u((()=>[p("取 消")])),_:1}),d(K,{type:"primary",onClick:t.saveEdit},{default:u((()=>[p("确 定")])),_:1},8,["onClick"])])])),default:u((()=>[d(O,{"label-width":"70px"},{default:u((()=>[d(J,{label:"区域名称"},{default:u((()=>[d(f,{modelValue:t.form.order_no,"onUpdate:modelValue":a[8]||(a[8]=e=>t.form.order_no=e)},null,8,["modelValue"])])),_:1}),d(J,{label:"区域等级"},{default:u((()=>[d(k,{modelValue:t.form.area_level,"onUpdate:modelValue":a[9]||(a[9]=e=>t.form.area_level=e),placeholder:"无",class:"w"},{default:u((()=>[(r(!0),i(c,null,m(t.result.area_levels,((e,a)=>(r(),_(v,{key:a,label:e.label,value:e.dc_value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}]]);export{K as default};
