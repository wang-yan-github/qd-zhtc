import{f as e,b as a,r as l,o as t,h as r,i as o,k as n,l as d,m as s,c as u,F as i,j as c,p as m}from"./vendor.ac52fd94.js";import{_ as p,a5 as g,a6 as h,U as b,l as f,ai as y,aj as I}from"./index.1d57ac4a.js";const k={name:"orderTongji",data:()=>({tableH:0}),setup(){const l=localStorage.getItem("menuType"),t=e({areaId:"",streetId:"",roadId:"",parkId:"",startTime:"",endTime:"",pageIndex:1,pageSize:16}),r=a([]),o=a(0);let n=e({time:"",areaId:"",streetId:"",roadId:"",areas:[],streets:[],roads:[]});const d=e({}),s=()=>{g(d).then((e=>{n.areas=e.data}))};s();let u=e({areaId:t.areaId});const i=e({streetId:t.streetId}),c=()=>{I(t).then((e=>{r.value=e.data.list,o.value=e.data.total}))};c();const m=e=>`${e.getFullYear()}-${e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1)}-${e.getDate()>=10?e.getDate():"0"+e.getDate()}`;return{query:t,tableData:r,form:n,pageTotal:o,menuType:l,getArea:s,getStreet:()=>{u.areaId=t.areaId,t.roadId="",t.streetId="",h(u).then((e=>{n.streets=e.data}))},getQueryDate:()=>{null==n.time||[]==n.time||""==n.time?(t.startTime="",t.endTime=""):(t.startTime=m(n.time[0]),t.endTime=m(n.time[1]))},getRoad:()=>{t.roadId="",i.streetId=t.streetId,b(i).then((e=>{n.roads=e.data}))},getParks:()=>{i.streetId=t.streetId,t.parkId="",f(i).then((e=>{n.roads=e.data}))},handleSearch:()=>{t.pageIndex=1,c()},handlePageChange:e=>{t.pageIndex=e,c()},exportExcel:()=>{y(t).then((e=>{const a=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.href=a,l.setAttribute("download","收入报表.xls"),document.body.appendChild(l),l.click()}))}}},methods:{goTo(){this.$router.push("/cashstatictwo")},goTo2(){this.$router.push("/cashstaticthree")},goTo3(){this.$router.push("/cashstaticfour")}},created(){let e=document.documentElement.clientHeight||document.body.clientHeight;this.tableH=e-308+"px"}},_={class:"container"},C={class:"top-panel f-cb"},v={class:"left-panel"},T={class:"right-panel"},V=o("span",{class:"mar5 color999"},null,-1),w=o("span",{class:"mar5 color999"},null,-1),x=o("span",{class:"mar5 color999"},null,-1),q=o("span",{class:"mar5 color999"},null,-1),S=o("div",{class:"clear"},null,-1),U={class:"pagination"};var z=p(k,[["render",function(e,a,p,g,h,b){const f=l("el-button"),y=l("el-button-group"),I=l("el-date-picker"),k=l("el-form-item"),z=l("el-option"),D=l("el-select"),j=l("el-form"),$=l("el-table-column"),H=l("el-table"),R=l("el-pagination"),E=l("el-card"),N=l("el-col"),P=l("el-row");return t(),r("div",null,[o("div",_,[o("div",C,[o("div",v,[n(y,null,{default:d((()=>[n(f,{type:"primary",icon:"el-icon-s-grid"},{default:d((()=>[s("收入报表")])),_:1}),n(f,{icon:"el-icon-s-marketing",onClick:a[0]||(a[0]=e=>b.goTo())},{default:d((()=>[s("充值增长 ")])),_:1}),n(f,{icon:"el-icon-money",onClick:a[1]||(a[1]=e=>b.goTo2())},{default:d((()=>[s("缴费方式统计 ")])),_:1}),n(f,{icon:"el-icon-s-custom",onClick:a[2]||(a[2]=e=>b.goTo3())},{default:d((()=>[s("免单统计 ")])),_:1})])),_:1})]),o("div",T,[n(j,{"label-width":"80px",inline:"",size:"small"},{default:d((()=>[n(k,{label:"时间",class:"mb0"},{default:d((()=>[n(I,{size:"small",modelValue:g.form.time,"onUpdate:modelValue":a[3]||(a[3]=e=>g.form.time=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",class:"datepicker",onChange:g.getQueryDate},null,8,["modelValue","onChange"])])),_:1}),"0"==g.menuType?(t(),u(k,{key:0,label:"选择层级"},{default:d((()=>[n(D,{clearable:"",modelValue:g.query.areaId,"onUpdate:modelValue":a[4]||(a[4]=e=>g.query.areaId=e),filterable:"",placeholder:"所有区域",class:"w100",onChange:g.getStreet},{default:d((()=>[(t(!0),r(i,null,c(g.form.areas,(e=>(t(),u(z,{key:e.id,label:e.area_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),V,n(D,{clearable:"",modelValue:g.query.streetId,"onUpdate:modelValue":a[5]||(a[5]=e=>g.query.streetId=e),filterable:"",placeholder:"所有街道",class:"w100",onChange:g.getRoad},{default:d((()=>[(t(!0),r(i,null,c(g.form.streets,(e=>(t(),u(z,{key:e.id,label:e.street_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),w,n(D,{clearable:"",modelValue:g.query.roadId,"onUpdate:modelValue":a[6]||(a[6]=e=>g.query.roadId=e),filterable:"",placeholder:"所有路内",class:"w100"},{default:d((()=>[(t(!0),r(i,null,c(g.form.roads,(e=>(t(),u(z,{key:e.id,label:e.road_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):m("",!0),"1"==g.menuType?(t(),u(k,{key:1,label:"选择层级"},{default:d((()=>[n(D,{clearable:"",modelValue:g.query.areaId,"onUpdate:modelValue":a[7]||(a[7]=e=>g.query.areaId=e),filterable:"",placeholder:"所有区域",class:"w100",onChange:g.getStreet},{default:d((()=>[(t(!0),r(i,null,c(g.form.areas,(e=>(t(),u(z,{key:e.id,label:e.area_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),x,n(D,{clearable:"",modelValue:g.query.streetId,"onUpdate:modelValue":a[8]||(a[8]=e=>g.query.streetId=e),filterable:"",placeholder:"所有街道",class:"w100",onChange:g.getParks},{default:d((()=>[(t(!0),r(i,null,c(g.form.streets,(e=>(t(),u(z,{key:e.id,label:e.street_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),q,n(D,{clearable:"",modelValue:g.query.parkId,"onUpdate:modelValue":a[9]||(a[9]=e=>g.query.parkId=e),filterable:"",placeholder:"所有停车场",class:"w100"},{default:d((()=>[(t(!0),r(i,null,c(g.form.roads,(e=>(t(),u(z,{key:e.id,label:e.park_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):m("",!0),n(k,{class:"mb0"},{default:d((()=>[n(f,{size:"small",type:"primary",icon:"el-icon-search",onClick:g.handleSearch},{default:d((()=>[s("查询 ")])),_:1},8,["onClick"])])),_:1}),n(k,{class:"mb0"},{default:d((()=>[n(f,{size:"small",type:"success",icon:"el-icon-upload2",onClick:g.exportExcel},{default:d((()=>[s("导出 ")])),_:1},8,["onClick"])])),_:1})])),_:1})]),S]),n(P,{gutter:20},{default:d((()=>[n(N,{span:24},{default:d((()=>[n(E,{shadow:"hover"},{default:d((()=>[n(H,{data:g.tableData,border:"",class:"table","max-height":h.tableH,ref:"multipleTable","header-cell-class-name":"table-header",onSelectionChange:e.handleSelectionChange},{default:d((()=>[n($,{type:"index",label:"序号",width:"55",align:"center"}),n($,{prop:"areaName",label:"区域",width:"300",align:"center"}),n($,{prop:"streetName",label:"街道",width:"300",align:"center"}),"0"==g.menuType?(t(),u($,{key:0,prop:"roadName",label:"路内",align:"center"})):m("",!0),"1"==g.menuType?(t(),u($,{key:1,prop:"roadName",label:"停车场",align:"center"})):m("",!0),n($,{prop:"receivable",label:"应收",width:"200",align:"center"}),n($,{prop:"netReceipts",label:"实收",width:"200",align:"center"})])),_:1},8,["data","max-height","onSelectionChange"]),o("div",U,[n(R,{background:"",layout:"total, prev, pager, next","current-page":g.query.pageIndex,"page-size":g.query.pageSize,total:g.pageTotal,onCurrentChange:g.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])),_:1})])),_:1})])),_:1})])])}]]);export{z as default};
